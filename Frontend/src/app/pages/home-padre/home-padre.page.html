<ion-header>
  <ion-toolbar style="text-align: center;">
    <br>
    <ion-title style="color: white; font-family: 'Montserrat', sans-serif;">Estudiantes Asignados</ion-title>
    <button class="btn btn-danger" style="float: right; padding: 6px; font-size: 14px; background-color: transparent; filter: invert();" (click)="cerrarSesion()" aria-label="Cerrar sesión">
      <img src="assets/93627.png" alt="Logo" width="16" height="16" />
    </button> 
  </ion-toolbar>
</ion-header>

<ion-content>
 
  <div class="center-container" *ngIf="loading">
    <ion-spinner name="crescent"></ion-spinner>
  </div>


  <div *ngIf="error" class="center-container">
    <div class="login-html">
      <p class="label" style="color: #6e0000;">{{ error }}</p>
    </div>
  </div>


  <div class="center-container" *ngIf="!loading && !error">
    <div class="login-html">

      <div *ngIf="!personaAutorizada">
        <p class="label" style="color: #6e0000;">No se encontró la persona autorizada</p>
      </div>
 
    <h1 style="color: #6e0000; font-family: 'Montserrat', sans-serif; text-align: center;"> <b>Persona Autorizada: </b> <span style="color: black; font-family: 'Montserrat', sans-serif;"> {{personaAutorizada?.nombre || 'Cargando...'}} </span></h1>


     
      <div *ngIf="personaAutorizada">
      

        <div *ngFor="let grupo of estudiantesGrouped | keyvalue">
          <h3 style="color: #6e0000; margin-bottom: 10px;">{{ grupo.key }}</h3>

          <ion-list style="background-color: white;">
           <ion-item class="input-item" *ngFor="let estudiante of grupo.value">
  <ion-avatar slot="start">
    <img [src]="getFotoUrl(estudiante)" alt="Foto del estudiante" />
  </ion-avatar>
  <ion-label>
    <h2 style="color: #000; font-size: 16px;">{{ estudiante.nombre }}</h2>
    <p style="color: #333;">Grado: {{ estudiante.grado || 'N/A' }}</p>
    <p style="color: #333;">Grupo: {{ estudiante.grupo || 'N/A' }}</p>
  </ion-label>
 <button (click)="crearAvisoParaEstudiante(estudiante, personaAutorizada)">Enviar Aviso</button>






</ion-item>

          </ion-list>
        </div>
      </div>
    </div>
  </div>
</ion-content>
 
<style>:host {
  --ion-background-color: transparent; /* o quítalo */
  background-image: linear-gradient(rgba(255, 255, 255, 0.959), rgba(255, 255, 255, 0.897)),
    url('/assets/1.png');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  
}

ion-content {
  --padding-start: 0;
  --padding-end: 0;
  --padding-top: 0;
  --padding-bottom: 0;

  
 
}

 .center-container {
    display: flex;
    justify-content: center;
    align-items: center;
    box-sizing: border-box;
  }


.login-html {
  max-width: 525px;
  width: 100%;
  min-height: 570px;
  background-color: white;
  box-shadow: 0 12px 15px 0 rgb(56, 53, 53), 0 17px 50px 0 rgba(0,0,0,.19);
  border-radius: 15px;
  overflow: hidden;

  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  background: rgba(255, 255, 255, 0.9);
  padding: 60px 40px 40px 40px;
  color: #fff;
  box-sizing: border-box;
  border-radius: 15px;
}

.label {
  color: #ffffff;
  font-size: 12px;
  text-transform: uppercase;
  font-weight: 600;
  letter-spacing: 1px;
  font-family: 'Montserrat';
}

ion-item.input-item {
  --border-color: rgba(255, 255, 255, 0.3);
  --border-style: solid;
  --background: white;
  --background-color: rgb(124, 0, 0);
  --border-width: 1px;
  --border-radius: 10px;
  --padding-start: 20px;
  --padding-end: 20px;
  --min-height: 50px;
  --transform-style: preserve-3d;
  margin-top: 25px;
  margin-bottom: 25px;
  color: #fff;
  border: 2px;
  border-width: 5px;
  border-radius: 10px;
  --box-shadow: 0 8px 15px rgba(0, 0, 0, 0.4), 0 4px 6px rgba(0, 0, 0, 0.3);
  --text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
  --transform: translateZ(10px);
  --transition: box-shadow 0.3s ease, transform 0.3s ease;
}

ion-item.input-item {
  box-shadow: 0 12px 25px rgba(77, 0, 0, 0.6), 0 6px 10px rgba(105, 1, 1, 0.4);
  transform: translateZ(10px);
}
ion-item.input-item:hover {
  box-shadow: 0 12px 25px rgba(77, 0, 0, 0.6), 0 6px 10px rgba(105, 1, 1, 0.4);
  transform: translateZ(10px);
}

.bottom-menu ion-button {
    --color: #fff;
    font-size: 28px;
    flex: none;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 50px;
    height: 50px;
    border-radius: 10px;
    
  }

   .bottom-menu {
    display: flex;
    justify-content: center;
    width: 100%;
    gap: 30px;
  }
  
ion-toolbar {
  --background: #6e0000 !important;
    justify-content: center; 
  align-items: center;    
}</style>
